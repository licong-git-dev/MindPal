<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åˆ›å»ºæ•°å­—äºº - é€‰æ‹©å£°éŸ³</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/animations.css">

  <style>
    .create-page {
      min-height: 100vh;
      background: var(--color-bg-dark);
      display: flex;
      flex-direction: column;
    }

    .top-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-md) var(--spacing-2xl);
      background: var(--color-bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      position: sticky;
      top: 0;
      z-index: var(--z-dropdown);
    }

    .nav-back {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      color: var(--color-text-secondary);
      text-decoration: none;
      font-size: var(--font-size-body-large);
      transition: color var(--duration-fast) var(--ease-in-out);
    }

    .nav-back:hover {
      color: var(--color-primary-1);
    }

    .nav-title {
      font-size: var(--font-size-h4);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
    }

    .create-stepper {
      padding: var(--spacing-xl) var(--spacing-2xl);
      background: var(--color-bg-dark);
    }

    .create-content {
      flex: 1;
      padding: var(--spacing-2xl);
      max-width: 1000px;
      width: 100%;
      margin: 0 auto;
    }

    .content-header {
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .content-title {
      font-size: var(--font-size-h2);
      font-weight: var(--font-weight-bold);
      color: var(--color-text-primary);
      margin-bottom: var(--spacing-sm);
    }

    .content-description {
      font-size: var(--font-size-body-large);
      color: var(--color-text-secondary);
    }

    /* å£°éŸ³é€‰æ‹© */
    .voice-section {
      margin-bottom: var(--spacing-2xl);
    }

    .section-title {
      font-size: var(--font-size-h4);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
      margin-bottom: var(--spacing-md);
    }

    .voice-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-xl);
    }

    .voice-card {
      background: var(--color-bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 2px solid rgba(148, 163, 184, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--spacing-lg);
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-in-out);
      position: relative;
    }

    .voice-card:hover {
      border-color: var(--color-primary-1);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .voice-card.selected {
      border-color: var(--color-primary-1);
      background: rgba(99, 102, 241, 0.1);
      box-shadow: var(--shadow-glow);
    }

    .voice-card.selected::after {
      content: 'âœ“';
      position: absolute;
      top: 12px;
      right: 12px;
      width: 24px;
      height: 24px;
      background: var(--gradient-primary);
      color: #FFFFFF;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-body-small);
    }

    .voice-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--spacing-md);
    }

    .voice-info {
      flex: 1;
    }

    .voice-name {
      font-size: var(--font-size-body-large);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
      margin-bottom: var(--spacing-xs);
    }

    .voice-tags {
      display: flex;
      gap: var(--spacing-xs);
      flex-wrap: wrap;
    }

    .voice-tag {
      padding: 2px 8px;
      font-size: var(--font-size-body-small);
      background: rgba(99, 102, 241, 0.2);
      color: var(--color-primary-1);
      border-radius: var(--radius-sm);
    }

    .voice-tag.female {
      background: rgba(244, 114, 182, 0.2);
      color: var(--color-secondary-pink);
    }

    .voice-tag.male {
      background: rgba(96, 165, 250, 0.2);
      color: var(--color-secondary-blue);
    }

    .voice-play {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gradient-primary);
      border-radius: var(--radius-full);
      font-size: 24px;
      color: #FFFFFF;
      cursor: pointer;
      transition: transform var(--duration-fast) var(--ease-out);
      box-shadow: var(--shadow);
    }

    .voice-play:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-glow);
    }

    .voice-play.playing {
      animation: pulse 1.5s ease-in-out infinite;
    }

    .voice-description {
      font-size: var(--font-size-body-small);
      color: var(--color-text-secondary);
      line-height: var(--line-height-body);
    }

    /* å£°éŸ³å‚æ•°è°ƒèŠ‚ */
    .voice-params {
      background: var(--color-bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: var(--radius-xl);
      padding: var(--spacing-xl);
      margin-bottom: var(--spacing-xl);
    }

    .param-item {
      margin-bottom: var(--spacing-lg);
    }

    .param-item:last-child {
      margin-bottom: 0;
    }

    .param-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-sm);
    }

    .param-label {
      font-size: var(--font-size-body-large);
      color: var(--color-text-primary);
      font-weight: var(--font-weight-medium);
    }

    .param-value {
      font-size: var(--font-size-body);
      color: var(--color-primary-1);
      font-weight: var(--font-weight-semibold);
      min-width: 50px;
      text-align: right;
    }

    .param-slider {
      width: 100%;
      height: 8px;
      -webkit-appearance: none;
      appearance: none;
      background: rgba(30, 41, 59, 0.6);
      border-radius: var(--radius-full);
      outline: none;
      cursor: pointer;
    }

    .param-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--gradient-primary);
      border-radius: var(--radius-full);
      cursor: pointer;
      box-shadow: var(--shadow-glow);
      transition: transform var(--duration-fast) var(--ease-out);
    }

    .param-slider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }

    .param-slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: var(--gradient-primary);
      border: none;
      border-radius: var(--radius-full);
      cursor: pointer;
      box-shadow: var(--shadow-glow);
      transition: transform var(--duration-fast) var(--ease-out);
    }

    .param-slider::-moz-range-thumb:hover {
      transform: scale(1.2);
    }

    .param-hint {
      font-size: var(--font-size-body-small);
      color: var(--color-text-disabled);
      margin-top: var(--spacing-xs);
    }

    /* è¯•å¬åŒºåŸŸ */
    .preview-section {
      background: var(--color-bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: var(--radius-xl);
      padding: var(--spacing-xl);
      text-align: center;
    }

    .preview-text {
      font-size: var(--font-size-body-large);
      color: var(--color-text-secondary);
      margin-bottom: var(--spacing-lg);
      padding: var(--spacing-lg);
      background: rgba(15, 23, 42, 0.6);
      border-radius: var(--radius-md);
      line-height: 1.8;
    }

    .preview-btn {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .create-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-lg) var(--spacing-2xl);
      background: var(--color-bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid rgba(148, 163, 184, 0.2);
      position: sticky;
      bottom: 0;
    }

    .footer-left {
      display: flex;
      gap: var(--spacing-md);
    }

    .footer-right {
      display: flex;
      gap: var(--spacing-md);
    }

    @media (max-width: 768px) {
      .top-nav,
      .create-stepper,
      .create-content,
      .create-footer {
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
      }

      .voice-grid {
        grid-template-columns: 1fr;
      }

      .create-footer {
        flex-direction: column;
        gap: var(--spacing-md);
      }

      .footer-left,
      .footer-right {
        width: 100%;
      }

      .footer-right {
        flex-direction: row-reverse;
      }

      .footer-right .btn {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <div class="create-page page-transition">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="top-nav">
      <a href="create-dh-step2.html" class="nav-back">
        <span>â†</span>
        <span>è¿”å›</span>
      </a>
      <h2 class="nav-title">åˆ›å»ºæ•°å­—äºº</h2>
      <div style="width: 60px;"></div>
    </nav>

    <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
    <div class="create-stepper">
      <div class="stepper">
        <div class="step completed">
          <div class="step-circle">1</div>
          <div class="step-label">é€‰æ‹©å½¢è±¡</div>
        </div>
        <div class="step-line"></div>
        <div class="step completed">
          <div class="step-circle">2</div>
          <div class="step-label">è®¾ç½®æ€§æ ¼</div>
        </div>
        <div class="step-line"></div>
        <div class="step active">
          <div class="step-circle">3</div>
          <div class="step-label">é€‰æ‹©å£°éŸ³</div>
        </div>
        <div class="step-line"></div>
        <div class="step">
          <div class="step-circle">4</div>
          <div class="step-label">è®¾ç½®çŸ¥è¯†åº“</div>
        </div>
        <div class="step-line"></div>
        <div class="step">
          <div class="step-circle">5</div>
          <div class="step-label">ç¡®è®¤åˆ›å»º</div>
        </div>
      </div>
    </div>

    <!-- ä¸»å†…å®¹ -->
    <div class="create-content">
      <div class="content-header">
        <h1 class="content-title gradient-text">é€‰æ‹©æ•°å­—äººå£°éŸ³</h1>
        <p class="content-description">é€‰æ‹©ä¸€ä¸ªä½ å–œæ¬¢çš„å£°éŸ³ï¼Œå¹¶è°ƒæ•´éŸ³è‰²å‚æ•°</p>
      </div>

      <!-- å£°éŸ³é€‰æ‹© -->
      <div class="voice-section">
        <h3 class="section-title">é€‰æ‹©å£°éŸ³ç±»å‹</h3>
        <div class="voice-grid">
          <!-- å¥³å£° -->
          <div class="voice-card" data-voice="xiaoya" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°é›…</div>
                <div class="voice-tags">
                  <span class="voice-tag female">å¥³å£°</span>
                  <span class="voice-tag">æ¸©æŸ”</span>
                  <span class="voice-tag">ç”œç¾</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaoya')">â–¶</div>
            </div>
            <div class="voice-description">æ¸©æŸ”ç”œç¾çš„å¥³å£°ï¼Œé€‚åˆæƒ…æ„Ÿé™ªä¼´å’Œæ—¥å¸¸å¯¹è¯</div>
          </div>

          <div class="voice-card" data-voice="xiaoqing" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°é’</div>
                <div class="voice-tags">
                  <span class="voice-tag female">å¥³å£°</span>
                  <span class="voice-tag">çŸ¥æ€§</span>
                  <span class="voice-tag">ä¸“ä¸š</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaoqing')">â–¶</div>
            </div>
            <div class="voice-description">çŸ¥æ€§ä¼˜é›…çš„å¥³å£°ï¼Œé€‚åˆçŸ¥è¯†æœåŠ¡å’Œä¸“ä¸šå’¨è¯¢</div>
          </div>

          <div class="voice-card" data-voice="xiaoxin" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°æ¬£</div>
                <div class="voice-tags">
                  <span class="voice-tag female">å¥³å£°</span>
                  <span class="voice-tag">æ´»æ³¼</span>
                  <span class="voice-tag">å…ƒæ°”</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaoxin')">â–¶</div>
            </div>
            <div class="voice-description">æ´»æ³¼å…ƒæ°”çš„å¥³å£°ï¼Œå……æ»¡é’æ˜¥æœæ°”å’Œæ­£èƒ½é‡</div>
          </div>

          <!-- ç”·å£° -->
          <div class="voice-card" data-voice="xiaoyu" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°å®‡</div>
                <div class="voice-tags">
                  <span class="voice-tag male">ç”·å£°</span>
                  <span class="voice-tag">é˜³å…‰</span>
                  <span class="voice-tag">æ¸©æš–</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaoyu')">â–¶</div>
            </div>
            <div class="voice-description">é˜³å…‰æ¸©æš–çš„ç”·å£°ï¼Œç»™äººå®‰å…¨æ„Ÿå’Œä¿¡èµ–æ„Ÿ</div>
          </div>

          <div class="voice-card" data-voice="xiaozhi" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°æ™º</div>
                <div class="voice-tags">
                  <span class="voice-tag male">ç”·å£°</span>
                  <span class="voice-tag">æ²‰ç¨³</span>
                  <span class="voice-tag">ç†æ€§</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaozhi')">â–¶</div>
            </div>
            <div class="voice-description">æ²‰ç¨³ç†æ€§çš„ç”·å£°ï¼Œé€‚åˆä¸“ä¸šåˆ†æå’Œå†³ç­–å»ºè®®</div>
          </div>

          <div class="voice-card" data-voice="xiaohao" onclick="selectVoice(this)">
            <div class="voice-header">
              <div class="voice-info">
                <div class="voice-name">å°æµ©</div>
                <div class="voice-tags">
                  <span class="voice-tag male">ç”·å£°</span>
                  <span class="voice-tag">å¹½é»˜</span>
                  <span class="voice-tag">é£è¶£</span>
                </div>
              </div>
              <div class="voice-play" onclick="playVoice(event, 'xiaohao')">â–¶</div>
            </div>
            <div class="voice-description">å¹½é»˜é£è¶£çš„ç”·å£°ï¼Œèƒ½å¸¦æ¥è½»æ¾æ„‰å¿«çš„å¯¹è¯</div>
          </div>
        </div>
      </div>

      <!-- å£°éŸ³å‚æ•° -->
      <div class="voice-params">
        <h3 class="section-title">è°ƒæ•´å£°éŸ³å‚æ•°</h3>

        <div class="param-item">
          <div class="param-header">
            <span class="param-label">è¯­é€Ÿ</span>
            <span class="param-value" id="speedValue">1.0x</span>
          </div>
          <input type="range" class="param-slider" id="speed" min="0.5" max="2.0" step="0.1" value="1.0" oninput="updateParam('speed', this.value)">
          <div class="param-hint">è°ƒæ•´è¯´è¯çš„å¿«æ…¢ï¼Œ0.5å€æœ€æ…¢ï¼Œ2å€æœ€å¿«</div>
        </div>

        <div class="param-item">
          <div class="param-header">
            <span class="param-label">éŸ³è°ƒ</span>
            <span class="param-value" id="pitchValue">0</span>
          </div>
          <input type="range" class="param-slider" id="pitch" min="-10" max="10" step="1" value="0" oninput="updateParam('pitch', this.value)">
          <div class="param-hint">è°ƒæ•´éŸ³è°ƒé«˜ä½ï¼Œ-10æœ€ä½æ²‰ï¼Œ+10æœ€å°–é”</div>
        </div>

        <div class="param-item">
          <div class="param-header">
            <span class="param-label">éŸ³é‡</span>
            <span class="param-value" id="volumeValue">80%</span>
          </div>
          <input type="range" class="param-slider" id="volume" min="0" max="100" step="5" value="80" oninput="updateParam('volume', this.value)">
          <div class="param-hint">è°ƒæ•´å£°éŸ³å¤§å°</div>
        </div>
      </div>

      <!-- è¯•å¬åŒºåŸŸ -->
      <div class="preview-section">
        <h3 class="section-title">è¯•å¬æ•ˆæœ</h3>
        <div class="preview-text">
          "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„æ•°å­—äººä¼´ä¾£ã€‚æ— è®ºä½ å¼€å¿ƒè¿˜æ˜¯éš¾è¿‡ï¼Œæˆ‘éƒ½ä¼šé™ªä¼´åœ¨ä½ èº«è¾¹ï¼Œå€¾å¬ä½ çš„å¿ƒå£°ï¼Œç»™ä½ æ¸©æš–å’Œæ”¯æŒã€‚"
        </div>
        <button class="btn btn-primary preview-btn" onclick="previewVoice()">
          <span id="previewIcon">ğŸ”Š</span>
          <span id="previewText">è¯•å¬å½“å‰è®¾ç½®</span>
        </button>
      </div>
    </div>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <footer class="create-footer">
      <div class="footer-left">
        <button class="btn btn-text" onclick="saveDraft()">
          ğŸ’¾ ä¿å­˜è‰ç¨¿
        </button>
      </div>
      <div class="footer-right">
        <button class="btn btn-secondary" onclick="window.location.href='create-dh-step2.html'">
          ä¸Šä¸€æ­¥
        </button>
        <button class="btn btn-primary" id="nextBtn" onclick="goToNextStep()" disabled>
          ä¸‹ä¸€æ­¥
        </button>
      </div>
    </footer>
  </div>

  <script>
    // åŠ è½½æ•°æ®
    let dhData = JSON.parse(sessionStorage.getItem('create_dh_data') || '{}');
    let currentPlayingVoice = null;

    // æ¢å¤å·²ä¿å­˜çš„æ•°æ®
    if (dhData.voice) {
      const card = document.querySelector(`[data-voice="${dhData.voice}"]`);
      if (card) {
        card.classList.add('selected');
        document.getElementById('nextBtn').disabled = false;
      }
    }

    if (dhData.voiceParams) {
      const params = dhData.voiceParams;
      if (params.speed) {
        document.getElementById('speed').value = params.speed;
        document.getElementById('speedValue').textContent = params.speed + 'x';
      }
      if (params.pitch !== undefined) {
        document.getElementById('pitch').value = params.pitch;
        document.getElementById('pitchValue').textContent = params.pitch;
      }
      if (params.volume) {
        document.getElementById('volume').value = params.volume;
        document.getElementById('volumeValue').textContent = params.volume + '%';
      }
    }

    // é€‰æ‹©å£°éŸ³
    function selectVoice(element) {
      document.querySelectorAll('.voice-card').forEach(card => {
        card.classList.remove('selected');
      });

      element.classList.add('selected');

      const voiceType = element.dataset.voice;
      dhData.voice = voiceType;
      sessionStorage.setItem('create_dh_data', JSON.stringify(dhData));

      document.getElementById('nextBtn').disabled = false;
    }

    // æ’­æ”¾å£°éŸ³ç¤ºä¾‹
    function playVoice(event, voiceId) {
      event.stopPropagation();
      const playBtn = event.currentTarget;

      if (currentPlayingVoice === voiceId) {
        // åœæ­¢æ’­æ”¾
        playBtn.textContent = 'â–¶';
        playBtn.classList.remove('playing');
        currentPlayingVoice = null;
      } else {
        // åœæ­¢å…¶ä»–æ’­æ”¾
        document.querySelectorAll('.voice-play').forEach(btn => {
          btn.textContent = 'â–¶';
          btn.classList.remove('playing');
        });

        // å¼€å§‹æ’­æ”¾
        playBtn.textContent = 'â¸';
        playBtn.classList.add('playing');
        currentPlayingVoice = voiceId;

        // æ¨¡æ‹Ÿæ’­æ”¾3ç§’
        setTimeout(() => {
          playBtn.textContent = 'â–¶';
          playBtn.classList.remove('playing');
          currentPlayingVoice = null;
        }, 3000);

        // å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥è°ƒç”¨TTS API
        console.log('æ’­æ”¾å£°éŸ³:', voiceId);
      }
    }

    // æ›´æ–°å‚æ•°
    function updateParam(paramName, value) {
      if (!dhData.voiceParams) {
        dhData.voiceParams = {};
      }

      if (paramName === 'speed') {
        document.getElementById('speedValue').textContent = value + 'x';
        dhData.voiceParams.speed = parseFloat(value);
      } else if (paramName === 'pitch') {
        document.getElementById('pitchValue').textContent = value;
        dhData.voiceParams.pitch = parseInt(value);
      } else if (paramName === 'volume') {
        document.getElementById('volumeValue').textContent = value + '%';
        dhData.voiceParams.volume = parseInt(value);
      }

      sessionStorage.setItem('create_dh_data', JSON.stringify(dhData));
    }

    // è¯•å¬æ•ˆæœ
    function previewVoice() {
      if (!dhData.voice) {
        alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå£°éŸ³');
        return;
      }

      const previewBtn = document.querySelector('.preview-btn');
      const previewIcon = document.getElementById('previewIcon');
      const previewText = document.getElementById('previewText');

      previewIcon.textContent = 'ğŸ”Š';
      previewText.textContent = 'æ’­æ”¾ä¸­...';
      previewBtn.disabled = true;

      // æ¨¡æ‹Ÿæ’­æ”¾5ç§’
      setTimeout(() => {
        previewIcon.textContent = 'ğŸ”Š';
        previewText.textContent = 'è¯•å¬å½“å‰è®¾ç½®';
        previewBtn.disabled = false;
      }, 5000);

      // å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥è°ƒç”¨TTS API
      console.log('è¯•å¬å£°éŸ³:', dhData.voice, dhData.voiceParams);
    }

    // ä¿å­˜è‰ç¨¿
    function saveDraft() {
      dhData.isDraft = true;
      dhData.lastSaved = new Date().toISOString();

      const drafts = JSON.parse(localStorage.getItem('mindpal_dh_drafts') || '[]');
      const existingIndex = drafts.findIndex(d => d.draftId === dhData.draftId);

      if (existingIndex >= 0) {
        drafts[existingIndex] = dhData;
      } else {
        dhData.draftId = dhData.draftId || Date.now();
        drafts.push(dhData);
      }

      localStorage.setItem('mindpal_dh_drafts', JSON.stringify(drafts));
      alert('è‰ç¨¿å·²ä¿å­˜ï¼');
    }

    // ä¸‹ä¸€æ­¥
    function goToNextStep() {
      if (!dhData.voice) {
        alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå£°éŸ³');
        return;
      }

      // ä¿å­˜å½“å‰å‚æ•°
      if (!dhData.voiceParams) {
        dhData.voiceParams = {
          speed: parseFloat(document.getElementById('speed').value),
          pitch: parseInt(document.getElementById('pitch').value),
          volume: parseInt(document.getElementById('volume').value)
        };
      }

      dhData.currentStep = 4;
      sessionStorage.setItem('create_dh_data', JSON.stringify(dhData));
      window.location.href = 'create-dh-step4.html';
    }
  </script>
</body>
</html>
